<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="http://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(function() {
		// ページ読み込み時に自動的に実行される関数
		list();
		// 登録ボタンを押下したときに実行
		$('#btnSave').on('click', function() {
			insert();
		})
		
		function insert() {

		let writer = $("#writer").val();
		let memo = $("#memo").val();

		let params = {
			"writer" : writer,
			"memo" : memo,
			
		};

		$.ajax({
			type : "post",
			//送り出すデータ
			data : params,
			//送り先URL
			url : "/insert",
			//成功時の処理
			success : function() {
				list("search=");
				//入力値を空にする
			
				$("#writer").val("");
				$("#memo").val("");
			}
		});
	}
		
		function list() {
		
			$.ajax({
				
				//送り先URL
				url : "/list",
				//成功時の処理
				success : function(txt) {
					//idが「result]のコンテンツにサーバーから
					//送られてくる画面（今回はlist.jsp）を代入する
					$("#result").html(txt);
				}

			});
		}
    });
    </script>
</head>
<body>
    <div>
        <h2>メモ帳</h2><br><br>
        
        <form>
        名前：<input type="text" id="writer">
        メモ：<input type="text" id="memo">
        <input type="button" value="登録" id="btnSave">
        </form>
    </div>
    
    <div id="result"></div>
</body>
</html>